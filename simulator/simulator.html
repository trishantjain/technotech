<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>IoT Simulator Control</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .card {
            background: #fff;
            padding: 16px;
            border-radius: 8px;
            max-width: 420px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .row {
            margin-bottom: 14px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 6px;
        }

        input[type="range"] {
            width: 100%;
        }

        .value {
            font-size: 14px;
            color: #555;
        }

        .status {
            margin-top: 10px;
            font-size: 13px;
        }

        select {
            width: 100%;
            padding: 6px;
        }
    </style>
</head>

<body>

    <div class="card">
        <h2>IoT Simulator Control</h2>

        <!-- Mode -->
        <div class="row">
            <label for="mode">Mode</label>
            <select id="mode">
                <option value="manual">Manual</option>
                <option value="random">Random</option>
            </select>
        </div>

        <!-- Temperature -->
        <div class="row">
            <label for="insideTemperature">Inside Temperature (Â°C)</label>
            <input type="range" id="insideTemperature" min="0" max="100" value="25">
            <div class="value">Value: <span id="insideTempVal">25</span></div>
        </div>

        <div class="row">
            <label for="outsideTemperature">Outside Temperature (Â°C)</label>
            <input type="range" id="outsideTemperature" min="0" max="100" value="25">
            <div class="value">Value: <span id="outsideTempVal">25</span></div>
        </div>

        <!-- Humidity -->
        <div class="row">
            <label for="humidity">Humidity (%)</label>
            <input type="range" id="humidity" min="0" max="100" value="60">
            <div class="value">Value: <span id="humVal">60</span></div>
        </div>

        <div class="row">
            <label for="outputVoltage">Output Voltage (V)</label>
            <input type="text" id="outputVoltage" >
            <div class="value">Value: <span id="outputVoltageVal">60</span></div>
        </div>

        <div class="row">
            <label for="inputVoltage">Input Voltage (V)</label>
            <input type="range" id="inputVoltage" min="0" max="100" value="60">
            <div class="value">Value: <span id="inputVoltageVal">60</span></div>
        </div>

        <div class="row">
            <label for="fireAlarm">Fire Alarm</label>
            <input type="checkbox" id="fireAlarm">
        </div>
        <div class="row">
            <label for="leakage">Leakage</label>
            <input type="checkbox" id="leakage">
        </div>
        <div class="row">
            <label for="logging">Logging</label>
            <input type="checkbox" id="logging">
        </div>
        <div class="row">
            <label for="door">Door</label>
            <input type="checkbox" id="door">
        </div>
        <div class="row">
            <label for="lock">Lock</label>
            <input type="checkbox" id="lock">
        </div>
        <div class="row">
            <label for="password">Password</label>
            <input type="checkbox" id="password">
        </div>

        <div class="status" id="status">ðŸ”´ Disconnected</div>
    </div>

    <script>
        const statusEl = document.getElementById("status");
        const insideTempInput = document.getElementById("insideTemperature");
        const outsideTempInput = document.getElementById("outsideTemperature");
        const humidityInput = document.getElementById("humidity");
        const outputVoltageInput = document.getElementById("outputVoltage");
        const inputVoltageInput = document.getElementById("inputVoltage");
        const modeSelect = document.getElementById("mode");

        const insideTempVal = document.getElementById("insideTempVal");
        const outsideTempVal = document.getElementById("outsideTempVal");
        const outputVoltageVal = document.getElementById("outputVoltageVal");
        const inputVoltageVal = document.getElementById("inputVoltageVal");
        const humVal = document.getElementById("humVal");

        const fireAlarmInput = document.getElementById("fireAlarm");
        const leakageInput = document.getElementById("leakage");
        const loggingInput = document.getElementById("logging");
        const doorInput = document.getElementById("door");
        const lockInput = document.getElementById("lock");
        const passwordInput = document.getElementById("password");

        const fireAlarmVal = document.getElementById("fireAlarmVal");
        const leakageVal = document.getElementById("leakageVal");
        const loggingVal = document.getElementById("loggingVal");
        const doorVal = document.getElementById("doorVal");
        const lockVal = document.getElementById("lockVal");
        const passwordVal = document.getElementById("passwordVal");

        // Connect to simulator WebSocket
        const ws = new WebSocket("ws://localhost:8090");

        ws.onopen = () => {
            statusEl.textContent = "ðŸŸ¢ Connected to Simulator";
        };

        ws.onclose = () => {
            statusEl.textContent = "ðŸ”´ Disconnected";
        };

        ws.onmessage = (event) => {
            const state = JSON.parse(event.data);

            if (state.insideTemperature !== undefined) {
                insideTempInput.value = state.insideTemperature;
                insideTempVal.textContent = state.insideTemperature;
            }

            if (state.outsideTemperature !== undefined) {
                outsideTempInput.value = state.outsideTemperature;
                outsideTempVal.textContent = state.outsideTemperature;
            }

            if (state.humidity !== undefined) {
                humidityInput.value = state.humidity;
                humVal.textContent = state.humidity;
            }

            if (state.inputVoltage !== undefined) {
                inputVoltageInput.value = state.inputVoltage;
                inputVoltageVal.textContent = state.inputVoltage;
            }
            if (state.outputVoltage !== undefined) {
                outputVoltageInput.value = state.outputVoltage;
                outputVoltageVal.textContent = state.outputVoltage;
            }

            if (state.fireAlarm !== undefined) {
                fireAlarmInput.checked = state.fireAlarm;
            }

            if (state.leakage !== undefined) {
                leakageInput.checked = state.leakage;
            }

            if (state.logging !== undefined) {
                loggingInput.checked = state.logging;
            }

            if (state.door !== undefined) {
                doorInput.checked = state.door;
            }

            if (state.lock !== undefined) {
                lockInput.checked = state.lock;
            }

            if (state.password !== undefined) {
                passwordInput.checked = state.password;
            }

            if (state.mode) {
                modeSelect.value = state.mode;
            }
        };

        function sendUpdate(data) {
            if (ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify(data));
            }
        }

        insideTempInput.addEventListener("input", (e) => {
            insideTempVal.textContent = e.target.value;
            sendUpdate({ insideTemperature: Number(e.target.value) });
        });

        outsideTempInput.addEventListener("input", (e) => {
            outsideTempVal.textContent = e.target.value;
            sendUpdate({ outsideTemperature: Number(e.target.value) });
        });

        humidityInput.addEventListener("input", (e) => {
            humVal.textContent = e.target.value;
            sendUpdate({ humidity: Number(e.target.value) });
        });

        inputVoltageInput.addEventListener("input", (e) => {
            inputVoltageVal.textContent = e.target.value;
            sendUpdate({ inputVoltage: Number(e.target.value) });
        });

        outputVoltageInput.addEventListener("input", (e) => {
            outputVoltageVal.textContent = e.target.value;
            sendUpdate({ outputVoltage: Number(e.target.value) });
        });

        fireAlarmInput.addEventListener("change", (e) => {
            sendUpdate({ fireAlarm: e.target.checked });
        });

        leakageInput.addEventListener("change", (e) => {
            sendUpdate({ leakage: e.target.checked });
        });

        loggingInput.addEventListener("change", (e) => {
            sendUpdate({ logging: e.target.checked });
        });

        doorInput.addEventListener("change", (e) => {
            sendUpdate({ door: e.target.checked });
        });

        lockInput.addEventListener("change", (e) => {
            sendUpdate({ lock: e.target.checked });
        });

        passwordInput.addEventListener("change", (e) => {
            sendUpdate({ password: e.target.checked });
        });

        modeSelect.addEventListener("change", (e) => {
            sendUpdate({ mode: e.target.value });
        });
    </script>

</body>

</html>